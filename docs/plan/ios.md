# План: ios

**Назначение:** Библиотека рендера BDUI на SwiftUI (SPM-пакет **nahui3**): загрузка фичи по манифесту и файлам, передача версии платформы, применение дельты, рендер.

## Контекст

- Фича описывается манифестом (дерево файлов и папок с id, именем, хешем). Узел — ID (UUID от пути), имя файла, хеш; поля type/props/children не используются, иерархия в манифесте.
- Клиент запрашивает фичу, передаёт версию платформы; сервер отдаёт полный набор файлов + манифест или дельту (дельта строится и кешируется только на сервере).

## Задачи

1. **Модели данных**
   - Модели манифеста и узла: id (UUID), имя файла, хеш; дерево папок/файлов по манифесту. Модель дельты (набор операций над файлами/узлами), приходящей с сервера.

2. **Сеть и кеш**
   - Запрос фичи: платформа, id фичи, версия платформы на клиенте. Разбор ответа: полный набор файлов + манифест или дельта (или «нет изменений»). Локальный кеш последнего состояния фичи и манифеста для офлайна и быстрого старта.

3. **Применение дельты**
   - При получении дельты — обновление локального дерева файлов/манифеста (добавление, изменение, удаление узлов по id/пути). Перерисовка UI по обновлённому манифесту и содержимому файлов.

4. **Рендер по манифесту и файлам**
   - Интерпретация манифеста и содержимого файлов фичи для построения SwiftUI-вью (аналог рендера по описанию). Использование существующих компонентов (например, SimpleTextFieldView) как примитивов там, где это соответствует формату файлов.

5. **Документация и тесты**
   - README, примеры использования в demo; юнит-тесты парсинга манифеста и применения дельты.

## Результат

iOS-приложение (demo) подключает пакет nahui3, запрашивает фичу у backend с версией платформы, отображает её и при обновлениях применяет дельту от сервера.
