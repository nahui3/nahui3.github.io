# План: web

**Назначение:** React-компонент **nahui3**: загрузка фичи, передача версии, применение дельты, рендер по манифесту и файлам.

## Контекст

- Фича описывается манифестом (дерево папок и файлов с id, name, hash). Узел (файл в фиче): **id** (UUID от пути), **name** (имя файла), **hash** (content-hash). Иерархия задаётся манифестом.
- Клиент передаёт версию и id фичи; сервер отдаёт **дельту вместе с опубликованным манифестом** (либо «изменений не было»). Дельта кешируется только на сервере.

## Задачи

1. **Типы и модели**
   - TypeScript-типы для манифеста и узла: **id** (UUID), **name** (имя файла), **hash** (content-hash); дерево папок и файлов по манифесту. Тип ответа API: **дельта + опубликованный манифест** (или «изменений не было»).

2. **Сеть и кеш**
   - Хук или сервис: запрос фичи (платформа, id фичи, версия). Разбор ответа: дельта + опубликованный манифест (или «нет изменений»). Кеш манифеста и состояния фичи в памяти или localStorage.

3. **Применение дельты**
   - При получении дельты и опубликованного манифеста — применение дельты к предыдущему состоянию, кеширование манифеста. Обновление state (useState/useReducer) и перерисовка.

4. **Рендер по манифесту и файлам**
   - Построение React-дерева по манифесту и содержимому файлов фичи.

5. **Публичный API и сборка**
   - Компонент вида `<NahuiFeature featureId="..." />`, плюс хук для загрузки фичи и дельты с backend. Документация в docs/.

## Результат

Web demo передаёт версию и id фичи, получает дельту и опубликованный манифест, применяет дельту, кеширует манифест и рендерит.
