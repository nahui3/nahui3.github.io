# План: web

**Назначение:** React-библиотека рендера BDUI (**nahui3**): загрузка фичи по манифесту и файлам, передача версии платформы, применение дельты, рендер.

## Контекст

- Фича описывается манифестом (дерево файлов и папок с id, именем, хешем). Узел — ID (UUID от пути), имя файла, хеш; иерархия в манифесте.
- Клиент запрашивает фичу с версией платформы; сервер отдаёт полный набор + манифест или дельту (дельта только на сервере в кеше).

## Задачи

1. **Типы и модели**
   - TypeScript-типы для манифеста и узла: id (UUID), имя файла, хеш; дерево по манифесту. Тип ответа API: полный набор + манифест или дельта / «нет изменений».

2. **Сеть и кеш**
   - Хук или сервис: запрос фичи (платформа, id фичи, версия платформы). Разбор ответа (full vs delta / нет изменений). Кеш в памяти или localStorage для быстрого повторного отображения.

3. **Применение дельты**
   - Функция применения дельты к локальному состоянию (дерево/манифест); обновление state (useState/useReducer) и перерисовка.

4. **Рендер по манифесту и файлам**
   - Построение React-дерева по манифесту и содержимому файлов фичи. Использование HelloNahui и других примитивов где применимо.

5. **Публичный API и сборка**
   - Компонент вида `<NahuiFeature featureId="..." />` или `<NahuiRenderer manifest={...} files={...} />`, плюс хук для загрузки фичи и дельты с backend. Документация в docs/.

## Результат

Web demo загружает фичу с backend с версией платформы, рендерит её и при обновлениях применяет дельту от сервера.
