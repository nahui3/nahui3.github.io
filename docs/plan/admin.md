# План: admin

**Назначение:** Управление BDUI: настройка веток проекта для CI/CD-воркера, просмотр версий по платформам, выбор версии для публикации, фиксация версий у клиентов.

## Контекст

- На бэкенде в CI/CD работает **воркер**, который периодически (либо по таймеру, либо при пуше в ветку) анализирует указанные в настройках админки ветку проекта и на основе входящих в ветку файлов строит дерево хешей и манифесты, версионирует их.
- В админке можно посмотреть любую версию для каждой платформы и указать, какую версию нужно опубликовать и какие версии у клиентов.

## Задачи

1. **Настройки для воркера**
   - Хранение и редактирование настроек: репозитории (или пути к .git), ветки для анализа.
   - Связь с backend/воркером: воркер читает эти настройки и обновляет манифесты и версии.

2. **Просмотр версий**
   - Список версий по платформам (ios, android, web), построенных воркером.
   - Просмотр содержимого манифеста для выбранной версии и платформы (корневая фича, описывающая набор всех фич; дерево папок и файлов с id, именем, хешем).

3. **Выбор версии для публикации**
   - Указание опубликованной версии для каждой платформы.
   - Сохранение выбора в хранилище, доступном backend: при запросе клиента сервер сравнивает переданную версию с опубликованной, строит или достаёт из кеша дельту и отдаёт клиенту дельту вместе с опубликованным манифестом.
   
4. **Выбор версий у клиентов**
   - Указание версий, находящихся у клиентов для каждой платформы.
   - Сохранение выбора в хранилище, доступном backend: только по этим версиям при сравнении с опубликованной версией сервер может строить дельту.

5. **Интеграция с файлами**
   - Оставить при необходимости текущий поток загрузки файлов (InterfaceFile) для статичных ресурсов; основной поток версионирования — через воркер и манифесты.

## Результат

Админка — точка настройки источника изменений, просмотра версий и выбора версии для публикации и у клиентов по платформам.
