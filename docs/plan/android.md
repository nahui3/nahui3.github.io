# План: android

**Назначение:** Kotlin Compose библиотека **nahui3**: загрузка фичи, передача версии, применение дельты, рендер по манифесту и файлам.

## Контекст

- Фича описывается манифестом (дерево папок и файлов с id, name, hash). Узел (файл в фиче): **id** (UUID от пути), **name** (имя файла), **hash** (content-hash). Иерархия задаётся манифестом.
- Клиент передаёт версию и id фичи; сервер отдаёт **дельту вместе с опубликованным манифестом** (либо «изменений не было»). Дельта кешируется только на сервере.

## Задачи

1. **Модели данных**
   - data-классы или сериализация (kotlinx.serialization и т.п.) для манифеста и узла: **id** (UUID), **name** (имя файла), **hash** (content-hash); дерево папок и файлов по манифесту. Модель дельты от сервера.

2. **Сеть и кеш**
   - HTTP-клиент: запрос фичи (платформа, id фичи, версия). Разбор ответа: **дельта + опубликованный манифест** (или «изменений не было»). Кеш манифеста и состояния фичи.

3. **Применение дельты**
   - При получении дельты и опубликованного манифеста — применение дельты к предыдущему состоянию, кеширование манифеста. Обновление локального дерева (add/update/remove по id или пути). Обновление UI по манифесту и содержимому файлов.

4. **Рендер по манифесту и файлам**
   - Построение Compose-UI по манифесту и содержимому файлов фичи.

5. **Документация и тесты**
   - Обновить docs/USAGE.md; пример в demo; тесты парсинга манифеста и применения дельты.

## Результат

Android demo подключает библиотеку nahui3, передаёт версию и id фичи, получает дельту и опубликованный манифест, применяет дельту, кеширует манифест и рендерит.
