# План: android

**Назначение:** Библиотека рендера BDUI на Kotlin Compose (**nahui3**): загрузка фичи по манифесту и файлам, передача версии платформы, применение дельты, рендер.

## Контекст

- Фича описывается манифестом (дерево файлов и папок с id, именем, хешем). Узел — ID (UUID от пути), имя файла, хеш; иерархия в манифесте.
- Клиент запрашивает фичу с версией платформы; сервер отдаёт полный набор файлов + манифест или дельту (дельта только в кеше сервера).

## Задачи

1. **Модели данных**
   - data-классы или сериализация (kotlinx.serialization и т.п.) для манифеста и узла: id (UUID), имя файла, хеш; дерево по манифесту. Модель дельты от сервера.

2. **Сеть и кеш**
   - HTTP-клиент: запрос фичи (платформа, id фичи, версия платформы). Разбор ответа: полный набор + манифест или дельта / «нет изменений». Кеш последнего состояния фичи и манифеста.

3. **Применение дельты**
   - Обновление локального дерева по дельте (add/update/remove по id или пути). Обновление UI по манифесту и содержимому файлов.

4. **Рендер по манифесту и файлам**
   - Построение Compose-UI по манифесту и содержимому файлов фичи. Переиспользование FieldWithText и других компонентов где применимо.

5. **Документация и тесты**
   - Обновить docs/USAGE.md; пример в demo; тесты парсинга манифеста и применения дельты.

## Результат

Android demo подключает библиотеку nahui3, запрашивает фичу с версией платформы, рендерит её и применяет дельту при обновлениях.
